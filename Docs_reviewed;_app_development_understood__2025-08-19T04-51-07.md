[ ] NAME:Current Task List DESCRIPTION:Root task for conversation 77e76fee-0732-495a-ba22-dc3ffa48907c
-[x] NAME:Investigate and understand the app and current development state DESCRIPTION:Read README.md, SPECIFICATION.md, and all files under /docs to understand the application purpose, architecture, and current development progress.
-[x] NAME:Responsive Design: Ist-Stand untersuchen und Problemstellen identifizieren DESCRIPTION:Scanne App/Layout-Komponenten (App, Header, Workspace, Timeline, LabelPanel, MarkerList) und globale Styles, um aktuelle responsive Klassen/Breakpoints, Container/Grids und offensichtliche Probleme zu identifizieren.
-[x] NAME:Responsive Verbesserungen umsetzen (Iteration 1) DESCRIPTION:Verbesserungen für mobile UX: LabelPanel nur auf lg+ als statisches Panel zeigen (sonst Modal), Timeline mit Touch-Unterstützung (scrub/drag/resize), kleine Layout-Optimierungen für Header/Workspace.
-[ ] NAME:Entwicklungsplan bestätigen DESCRIPTION:Review und Freigabe des vorgeschlagenen Entwicklungsplans (Phasen, Umfang, Reihenfolge). Erst nach Bestätigung starten wir mit Phase 1.
-[x] NAME:Phase 1: Responsive Design vervollständigen DESCRIPTION:Mobile/Tablet UX finalisieren: Tooltip-Clamping, Header-Kompaktierung auf XS/SM, Timeline-Höhen/Hitboxen feinjustieren und Touch-Gesten prüfen.
--[x] NAME:Timeline: Tooltip-Clamping für XS/SM implementieren DESCRIPTION:Tooltips in der Timeline dynamisch positionieren (links/rechts/oben/unten), damit sie auf kleinen Bildschirmen im Viewport bleiben.
--[x] NAME:Header XS/SM: Kompaktierung DESCRIPTION:Paddings/Abstände reduzieren, Time-Display abkürzen, Line-Wraps vermeiden; Sichttest auf iPhone/Pixel Breiten.
--[x] NAME:Timeline: Höhen/Hitboxen feinjustieren DESCRIPTION:Breakpoints für Timeline-Höhen (h-24/32/40/48) validieren; Touch-Hitboxen für Marker-Kanten minimal vergrößern falls nötig.
--[x] NAME:Workspace/MarkerList: XS-Abstände prüfen DESCRIPTION:Spacing und Typografie auf sehr kleinen Geräten harmonisieren; Truncation/Wrap gezielt einsetzen.
--[x] NAME:Geräte-/Emulator-Test Touch-Gesten DESCRIPTION:Kurzer manueller Test auf Mobile/Emulator für Scrub/Drag/Resize; Issues notieren.
-[ ] NAME:Phase 2: LabelPanel – UI-Konsistenz DESCRIPTION:Range-Inputs auf shadcn/ui Slider umstellen; numerische Readouts/Feineingabe; Modal-Scroll & Touch-Zielgrößen optimieren.
--[ ] NAME:LabelPanel: Slider auf shadcn/ui umstellen DESCRIPTION:Valence/Arousal/Intensity/Confidence von native range auf shadcn Slider migrieren, inkl. Styles.
--[ ] NAME:LabelPanel: numerische Readouts/Feineingabe DESCRIPTION:Konsistente Anzeige der Werte und optionales Feintuning (Step per Tastatur); UX-Text anpassen.
--[ ] NAME:Mobile Modal: Scroll & Touch-Ziele DESCRIPTION:Innenabstände, max-height, Scroll-Verhalten und Checkbox-Gitter Touch-Targets optimieren.
--[ ] NAME:GEMS Select / Trigger Checkbox konsolidieren DESCRIPTION:Letzte Inkonsistenzen in Imports/Styles prüfen; einheitliche Props/Klassen anwenden.
-[ ] NAME:Phase 3: Button-Variants & Theme DESCRIPTION:cva-Variants in ui/button.tsx definieren (primary/secondary/ghost/destructive/outline) und App-weit anwenden; prominente Actions hervorheben.
--[ ] NAME:Button-Variants definieren (cva) DESCRIPTION:In ui/button.tsx Variants (primary/secondary/ghost/destructive/outline) definieren inkl. Größen.
--[ ] NAME:Buttons app-weit vereinheitlichen DESCRIPTION:Header/Footer/MarkerList etc. auf Variants umstellen; prominente Actions hervorheben.
--[ ] NAME:Theme-Tokens dokumentieren DESCRIPTION:Kurze Doku der Button-Variants und Farb-Tokens in docs/ ergänzen.
-[ ] NAME:Phase 4: Accessibility-Review DESCRIPTION:ARIA/Labels, Fokus-Management in Modals, Tastatur-Navigation (Timeline basic), Kontraste prüfen und justieren.
--[ ] NAME:ARIA/Labels ergänzen DESCRIPTION:Fehlende aria-label/title/role prüfen und ergänzen; semantische Strukturen verbessern.
--[ ] NAME:Modal Fokus-Management prüfen DESCRIPTION:Focus-Trap, initial focus, Escape/Overlay-Click Verhalten validieren; ggf. fixen.
--[ ] NAME:Tastatur-Navigation Basis DESCRIPTION:Timeline Wrapper fokusierbar machen; einfache Pfeil-/Tab-Interaktion dokumentieren.
--[ ] NAME:Kontraste prüfen/anpassen DESCRIPTION:Mit einfachen Tools Kontrast prüfen; nötige Anpassungen an Variablen/Klassen.
-[ ] NAME:Phase 5: Netzwerkstabilität/Proxy-Strategie DESCRIPTION:CORS-Proxy-URL konfigurierbar machen; Vite-Dev-Proxy für Genius evaluieren; Gemini-Proxy als Design-Dokument vorbereiten.
--[ ] NAME:Genius CORS-Proxy konfigurierbar DESCRIPTION:Env/Settings für Proxy-URL; geniusService so anpassen, dass URL austauschbar ist.
--[ ] NAME:Vite Dev-Proxy evaluieren DESCRIPTION:Proxy für Genius im Dev-Server evaluieren und (optional) implementieren; CORS entlasten.
--[ ] NAME:Gemini-Proxy Design-Dokument DESCRIPTION:Kurzes Design-Dokument (docs) mit Flow, Endpunkten, Rate-Limits, Key-Schutz.
--[ ] NAME:Entscheidungsnotiz Proxy-Strategie DESCRIPTION:Kurz festhalten: kurzfristig vs. langfristig gewählte Strategie und Gründe.
-[ ] NAME:Phase 6: QA & Dokumentation DESCRIPTION:Kurze manuelle QA-Checkliste in docs; README-Ergänzungen (Touch/Responsive); optional Setup für Tests (nur nach Freigabe).
--[ ] NAME:QA-Checkliste erstellen DESCRIPTION:docs: manuelle Testliste (Responsive, Touch, A11y Basics, Import/Export, KI-Buttons).
--[ ] NAME:README aktualisieren (Responsive/Touch) DESCRIPTION:Abschnitt zu Mobile/Tablet-Nutzung, bekannte Stolpersteine, Tipps (WSL/Network-URL).
--[ ] NAME:Optional: Test-Setup Plan DESCRIPTION:Kurzer Plan (docs), wie Tests später aufgesetzt würden (z. B. Vitest/RTL) – ohne Installation.
-[x] NAME:ROADMAP.md erstellen und erweitern DESCRIPTION:Erstelle docs/ROADMAP.md mit Phasen, Meilensteinen, Zukunftserweiterungen (KI-Verbesserungen, Visualisierung, Audio-Analysen, Gemini-Limits & Prompting-Strategien).
-[x] NAME:ROADMAP: Architektur-Sketch Segmentiertes Processing + RAC ergänzen DESCRIPTION:In docs/ROADMAP.md einen detaillierten Abschnitt mit Zielen, Komponenten, Pseudo-Flow und Mermaid-Diagramm einfügen.
-[ ] NAME:KI-Qualität: Audio-Features erweitern DESCRIPTION:Harmonic/Percussive Separation und Chroma Features (Tonart-Erkennung) implementieren für bessere Gemini-Eingabedaten.
-[ ] NAME:KI-Qualität: Prompt-Engineering optimieren DESCRIPTION:Few-Shot-Beispiele, strukturierte Prompts, Kontext-Selektion (Lyrics vs. Referents) evaluieren und verbessern.
-[ ] NAME:KI-Qualität: Genius-Kontext optimieren DESCRIPTION:Evaluieren ob Referents helfen oder Kontext aufblähen; selektive Übergabe nur relevanter Lyrics-Abschnitte.
-[ ] NAME:KI-Qualität: Segmentierung evaluieren DESCRIPTION:Testen ob Track-Segmentierung (30-60s) bessere Ergebnisse liefert als Volltrack-Analyse.
-[ ] NAME:Personalisierung: Negative Samples sammeln DESCRIPTION:Abgelehnte/gelöschte KI-Vorschläge als negative Trainingsdaten erfassen und nutzen.
-[ ] NAME:Personalisierung: Mehr Dimensionen trainieren DESCRIPTION:TF.js-Modell erweitern um Intensity/Confidence/GEMS-Personalisierung, nicht nur Valence/Arousal.
-[ ] NAME:Personalisierung: Training-Strategien verbessern DESCRIPTION:Minimum Samples evaluieren, Datenaugmentation, bessere Normalisierung/Gewichtung.
-[x] NAME:Touch-Drag vs. Touch-Tap unterscheiden DESCRIPTION:Timeline Touch-Handler erweitern um zwischen Drag-Gesten und normalen Taps zu unterscheiden, damit Marker-Drag nicht das Modal öffnet.
-[ ] NAME:Phase 7: Mobile UX Modernisierung DESCRIPTION:Header-Layout kompakter machen, Profile-Dropdown modernisieren, Button-Hierarchie verbessern und moderne Mobile-First Patterns implementieren.
--[x] NAME:Header-Layout kompakter machen DESCRIPTION:Card-basiertes Layout mit besserer Gruppierung, weniger Whitespace, logische Anordnung der Elemente nach Wichtigkeit.
--[x] NAME:Profile-Dropdown modernisieren DESCRIPTION:Native Dropdown durch Bottom Sheet/Modal ersetzen, Avatar + Name statt Text, Touch-optimierte Bedienung.
--[x] NAME:Button-Hierarchie verbessern DESCRIPTION:Primary (Load Audio), Secondary (Analyze/Refine), Tertiary (Settings) - visuelle Hierarchie durch Größe und Prominenz.
--[x] NAME:Bottom Navigation hinzufügen DESCRIPTION:Häufige Actions (Play/Pause, Marker erstellen, Zoom, Settings) in Bottom Navigation verlagern.
--[x] NAME:Gesture-Support implementieren DESCRIPTION:Swipe Left/Right für Navigation, Long Press für Kontext-Menü, Pull-to-Refresh für Audio neu laden.
-[x] NAME:Fix MarkerList Scrolling Issue DESCRIPTION:Resolve the critical scrolling problem by fixing height constraints and flex layout structure
-[x] NAME:Enhance List Management Features DESCRIPTION:Add search, filtering, sorting, and bulk operations for better marker management
-[x] NAME:Improve Visual Design & UX DESCRIPTION:Enhance visual hierarchy, spacing, and interaction patterns for better usability
-[x] NAME:Implement Performance Optimizations DESCRIPTION:Add virtual scrolling and performance improvements for handling large marker lists
-[x] NAME:Add Accessibility & Keyboard Navigation DESCRIPTION:Implement proper keyboard navigation, ARIA labels, and screen reader support
-[ ] NAME:MarkerList UI Enhancements DESCRIPTION:Implement advanced MarkerList features including keyboard shortcuts (Ctrl+F for search focus, Escape for clear all), extended search options (search in specific fields, case-sensitive, regex), and bulk actions (multi-select, batch delete, export selected markers).
-[ ] NAME:Mobile MarkerList Optimizations DESCRIPTION:Optimize MarkerList for mobile devices including touch-friendly interactions, swipe gestures, improved spacing for small screens, and mobile-specific filter UI patterns.
-[ ] NAME:Advanced MarkerList Features DESCRIPTION:Add intelligent filter suggestions with auto-complete for GEMS categories, frequently used filters as quick-buttons, filter history and favorites, plus marker density heatmap and statistics dashboard.
-[ ] NAME:MarkerList Performance Optimizations DESCRIPTION:Implement virtualized list for large marker datasets, lazy loading for marker details, and optimized search algorithms to handle thousands of markers efficiently.
-[ ] NAME:AI Analysis Performance Optimization DESCRIPTION:Implement chunked analysis for large audio files, add parallel processing for Gemini API calls, implement streaming results for real-time feedback, and add caching mechanism for repeated analyses of the same audio segments.
-[ ] NAME:Enhanced Context Integration DESCRIPTION:Integrate MusicBrainz API for detailed music metadata, add Spotify Audio Features API integration, implement user listening history analysis, and create multi-modal context fusion for more accurate emotion recognition.
-[ ] NAME:Real-time AI Feedback System DESCRIPTION:Implement continuous emotion analysis during playback, add live confidence scoring visualization, create adaptive suggestion refinement based on user interactions, and implement real-time model updates.
-[ ] NAME:Advanced AI Visualization Features DESCRIPTION:Create emotion heatmaps overlaying the waveform, implement confidence interval visualization, add emotional trajectory plotting over time, and create interactive AI explanation tooltips with detailed reasoning.
-[ ] NAME:AI Model Improvements DESCRIPTION:Implement ensemble methods combining multiple AI models, add cross-validation for model accuracy assessment, create automated hyperparameter tuning, and implement model versioning and rollback capabilities.
-[x] NAME:Phase 1: Quick Wins - AI Data Enhancement DESCRIPTION:Implement high-impact, low-effort improvements: MusicBrainz integration for genre/mood/style data, enhanced spectral features (tempo, harmony ratio, dynamic range), and playback behavior tracking (seek patterns, pause points, volume changes).
-[ ] NAME:Phase 2: External APIs Integration DESCRIPTION:Add external API integrations: Spotify Audio Features for professional baseline features, Last.fm tags for social context and genre refinement, and user preference learning with local preference modeling.
-[ ] NAME:Phase 3: Advanced Audio Analysis DESCRIPTION:Implement sophisticated audio analysis: pitch & harmony detection with chord progressions and modality, audio segmentation for structural analysis, and optional real-time physiological integration for biometric data.
-[ ] NAME:Test Enhanced Spectral Features DESCRIPTION:Load an audio file and verify that the new spectral features (tempo, harmonic ratio, dynamic range, rhythmic complexity, loudness, sharpness, roughness) are being calculated correctly. Check console output and AI analysis results for improved accuracy.
-[ ] NAME:Implement Playback Behavior Tracking DESCRIPTION:Add tracking for user playback behavior: seek patterns, pause points, volume changes, repeat sections, and skip attempts. This data will help identify user engagement patterns and emotional significance of different audio segments.
-[ ] NAME:Integrate MusicBrainz API DESCRIPTION:Add MusicBrainz API integration for automatic genre, mood, style, and instrumentation detection. This provides rich metadata context for AI analysis without requiring user API keys (MusicBrainz is free).
-[x] NAME:Phase 1: Gemini Prediction Enhancement DESCRIPTION:Improve initial Gemini predictions by enhancing audio feature integration, optimizing system prompts with enhanced spectral features, and implementing confidence-based suggestion filtering to provide the best possible baseline predictions before TensorFlow personalization.
-[ ] NAME:Phase 2: TensorFlow Model Architecture Enhancement DESCRIPTION:Expand the TensorFlow model to include more features (GEMS, Trigger, Intensity, audio features), implement dropout and regularization for better generalization, and add cross-validation for model quality assessment.
-[ ] NAME:Phase 3: Continuous Learning Implementation DESCRIPTION:Implement incremental learning for automatic model updates, add early stopping mechanisms, and create performance metrics to show users how well their personal model is performing.
-[ ] NAME:Phase 4: Advanced Training Optimization DESCRIPTION:Implement sophisticated training strategies including data augmentation, ensemble methods, and adaptive learning rates based on user behavior patterns and prediction accuracy.